define("common/ui/swipe/swipe",["css!common/ui/swipe/style.css"],function(){function a(a,b){"use strict";var c=function(){};var d=function(a){setTimeout(a||c,0)};var e={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(a.style[b[c]]!==undefined)return true;return false}(document.createElement("swipe"))};if(!a)return;var f=a.children[0];var g,h,i,j;b=b||{};var k=parseInt(b.startSlide,10)||0;var l=b.speed||300;b.continuous=b.continuous!==undefined?b.continuous:true;function m(){g=f.children;j=g.length;if(g.length<2)b.continuous=false;if(e.transitions&&b.continuous&&g.length<3){f.appendChild(g[0].cloneNode(true));f.appendChild(f.children[1].cloneNode(true));g=f.children}h=new Array(g.length);i=a.getBoundingClientRect().width||a.offsetWidth;f.style.width=g.length*i+"px";var c=g.length;while(c--){var d=g[c];d.style.width=i+"px";d.setAttribute("data-index",c);if(e.transitions){d.style.left=c*-i+"px";r(c,k>c?-i:k<c?i:0,0)}}if(b.continuous&&e.transitions){r(p(k-1),-i,0);r(p(k+1),i,0)}if(!e.transitions)f.style.left=k*-i+"px";a.style.visibility="visible"}function n(){if(b.continuous)q(k-1);else if(k)q(k-1)}function o(){if(b.continuous)q(k+1);else if(k<g.length-1)q(k+1)}function p(a){return(g.length+a%g.length)%g.length}function q(a,c){if(k==a)return;if(e.transitions){var f=Math.abs(k-a)/(k-a);if(b.continuous){var j=f;f=-h[p(a)]/i;if(f!==j)a=-f*g.length+a}var m=Math.abs(k-a)-1;while(m--)r(p((a>k?a:k)-m-1),i*f,0);a=p(a);r(k,i*f,c||l);r(a,0,c||l);if(b.continuous)r(p(a-f),-(i*f),0)}else{a=p(a);t(k*-i,a*-i,c||l)}k=a;d(b.callback&&b.callback(k,g[k]))}function r(a,b,c){s(a,b,c);h[a]=b}function s(a,b,c){var d=g[a];var e=d&&d.style;if(!e)return;e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms";e.webkitTransform="translate("+b+"px,0)"+"translateZ(0)";e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)"}function t(a,c,d){if(!d){f.style.left=c+"px";return}var e=+new Date;var h=setInterval(function(){var i=+new Date-e;if(i>d){f.style.left=c+"px";if(u)w();b.transitionEnd&&b.transitionEnd.call(event,k,g[k]);clearInterval(h);return}f.style.left=(c-a)*(Math.floor(i/d*100)/100)+a+"px"},4)}var u=b.auto||0;var v;function w(){v=setTimeout(o,u)}function x(){u=0;clearTimeout(v)}var y={};var z={};var A;var B={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":d(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":d(this.transitionEnd(a));break;case"resize":d(m);break}if(b.stopPropagation)a.stopPropagation()},start:function(a){var b=a.touches[0];y={x:b.pageX,y:b.pageY,time:+new Date};A=undefined;z={};f.addEventListener("touchmove",this,false);f.addEventListener("touchend",this,false)},move:function(a){if(a.touches.length>1||a.scale&&a.scale!==1)return;if(b.disableScroll)a.preventDefault();var c=a.touches[0];z={x:c.pageX-y.x,y:c.pageY-y.y};if(typeof A=="undefined"){A=!!(A||Math.abs(z.x)<Math.abs(z.y))}if(!A){a.preventDefault();x();if(b.continuous){s(p(k-1),z.x+h[p(k-1)],0);s(k,z.x+h[k],0);s(p(k+1),z.x+h[p(k+1)],0)}else{z.x=z.x/(!k&&z.x>0||k==g.length-1&&z.x<0?Math.abs(z.x)/i+1:1);s(k-1,z.x+h[k-1],0);s(k,z.x+h[k],0);s(k+1,z.x+h[k+1],0)}}},end:function(a){var c=+new Date-y.time;var d=Number(c)<250&&Math.abs(z.x)>20||Math.abs(z.x)>i/2;var e=!k&&z.x>0||k==g.length-1&&z.x<0;if(b.continuous)e=false;var j=z.x<0;if(!A){if(d&&!e){if(j){if(b.continuous){r(p(k-1),-i,0);r(p(k+2),i,0)}else{r(k-1,-i,0)}r(k,h[k]-i,l);r(p(k+1),h[p(k+1)]-i,l);k=p(k+1)}else{if(b.continuous){r(p(k+1),i,0);r(p(k-2),-i,0)}else{r(k+1,i,0)}r(k,h[k]+i,l);r(p(k-1),h[p(k-1)]+i,l);k=p(k-1)}b.callback&&b.callback(k,g[k])}else{if(b.continuous){r(p(k-1),-i,l);r(k,0,l);r(p(k+1),i,l)}else{r(k-1,-i,l);r(k,0,l);r(k+1,i,l)}}}f.removeEventListener("touchmove",B,false);f.removeEventListener("touchend",B,false)},transitionEnd:function(a){if(parseInt(a.target.getAttribute("data-index"),10)==k){if(u)w();b.transitionEnd&&b.transitionEnd.call(a,k,g[k])}}};m();if(u)w();if(e.addEventListener){if(e.touch)f.addEventListener("touchstart",B,false);if(e.transitions){f.addEventListener("webkitTransitionEnd",B,false);f.addEventListener("msTransitionEnd",B,false);f.addEventListener("oTransitionEnd",B,false);f.addEventListener("otransitionend",B,false);f.addEventListener("transitionend",B,false)}window.addEventListener("resize",B,false)}else{window.onresize=function(){m()}}return{setup:function(){m()},slide:function(a,b){x();q(a,b)},prev:function(){x();n()},next:function(){x();o()},stop:function(){x()},getPos:function(){return k},getNumSlides:function(){return j},kill:function(){x();f.style.width="";f.style.left="";var a=g.length;while(a--){var b=g[a];b.style.width="";b.style.left="";if(e.transitions)s(a,0,0)}if(e.addEventListener){f.removeEventListener("touchstart",B,false);f.removeEventListener("webkitTransitionEnd",B,false);f.removeEventListener("msTransitionEnd",B,false);f.removeEventListener("oTransitionEnd",B,false);f.removeEventListener("otransitionend",B,false);f.removeEventListener("transitionend",B,false);window.removeEventListener("resize",B,false)}else{window.onresize=null}}}}if(window.jQuery||window.Zepto){(function(b){b.fn.Swipe=function(c){return this.each(function(){b(this).data("Swipe",new a(b(this)[0],c))})}})(window.jQuery||window.Zepto)}});